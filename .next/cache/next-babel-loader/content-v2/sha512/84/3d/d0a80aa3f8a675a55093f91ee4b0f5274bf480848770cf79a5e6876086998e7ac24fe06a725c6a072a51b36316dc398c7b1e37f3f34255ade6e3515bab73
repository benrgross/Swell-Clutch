{"ast":null,"code":"var _jsxFileName = \"/Users/bengross/Desktop/Swell Clutch/Swell-Clutch/components/ImageUploader.js\";\nimport \"react-dropzone-uploader/dist/styles.css\";\nimport Dropzone from \"react-dropzone-uploader\";\nimport S3 from \"../lib/AWS\";\nimport axios from \"axios\"; // import server from \"../config\";\n// get image from uploader\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ImageUploader() {\n  const handleChangeStatus = ({\n    meta,\n    remove\n  }, status) => {\n    console.log(status, meta);\n  };\n\n  const handleSubmit = async files => {\n    const f = files[0];\n    console.log(f[\"file\"]); // * GET request: presigned URL\n\n    const response = await axios.get(process.env.NEXT_PUBLIC_API_ENDPOINT);\n    console.log(\"Response: \", response); // store\n\n    const result = await fetch(response.data.uploadURL, {\n      method: \"PUT\",\n      headers: {\n        ContentType: \"image/jpeg, image/png, image/heic, mov/mp4\"\n      },\n      body: f[\"file\"]\n    });\n    console.log(\"Result: \", result);\n    const fileName = response.data.Key;\n    const params = {\n      Bucket: \"swell-clutch\",\n      Key: fileName,\n      Expires: 604800\n    };\n    const signedURL = S3.getSignedUrl(\"getObject\", params);\n    console.log(\"url\", signedURL); // next steps are to store key or file path in back end.\n    // retrieve key, get signed URL\n  };\n\n  return /*#__PURE__*/_jsxDEV(Dropzone, {\n    onChangeStatus: handleChangeStatus,\n    onSubmit: handleSubmit,\n    hello: true,\n    maxFiles: 1,\n    multiple: false,\n    canCancel: false,\n    inputContent: \"Add A Photo\",\n    styles: {\n      dropzone: {\n        width: 200,\n        height: 10\n      },\n      dropzoneActive: {\n        borderColor: \"green\"\n      }\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n\nexport default ImageUploader;","map":{"version":3,"sources":["/Users/bengross/Desktop/Swell Clutch/Swell-Clutch/components/ImageUploader.js"],"names":["Dropzone","S3","axios","ImageUploader","handleChangeStatus","meta","remove","status","console","log","handleSubmit","files","f","response","get","process","env","NEXT_PUBLIC_API_ENDPOINT","result","fetch","data","uploadURL","method","headers","ContentType","body","fileName","Key","params","Bucket","Expires","signedURL","getSignedUrl","dropzone","width","height","dropzoneActive","borderColor"],"mappings":";AAAA,OAAO,yCAAP;AACA,OAAOA,QAAP,MAAqB,yBAArB;AACA,OAAOC,EAAP,MAAe,YAAf;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CACA;AAEA;;;;AACA,SAASC,aAAT,GAAyB;AACvB,QAAMC,kBAAkB,GAAG,CAAC;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,GAAD,EAAmBC,MAAnB,KAA8B;AACvDC,IAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ,EAAoBF,IAApB;AACD,GAFD;;AAGA,QAAMK,YAAY,GAAG,MAAOC,KAAP,IAAiB;AACpC,UAAMC,CAAC,GAAGD,KAAK,CAAC,CAAD,CAAf;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAYG,CAAC,CAAC,MAAD,CAAb,EAFoC,CAIpC;;AACA,UAAMC,QAAQ,GAAG,MAAMX,KAAK,CAACY,GAAN,CAAUC,OAAO,CAACC,GAAR,CAAYC,wBAAtB,CAAvB;AAEAT,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BI,QAA1B,EAPoC,CAQpC;;AACA,UAAMK,MAAM,GAAG,MAAMC,KAAK,CAACN,QAAQ,CAACO,IAAT,CAAcC,SAAf,EAA0B;AAClDC,MAAAA,MAAM,EAAE,KAD0C;AAElDC,MAAAA,OAAO,EAAE;AACPC,QAAAA,WAAW,EAAE;AADN,OAFyC;AAKlDC,MAAAA,IAAI,EAAEb,CAAC,CAAC,MAAD;AAL2C,KAA1B,CAA1B;AAOAJ,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBS,MAAxB;AAEA,UAAMQ,QAAQ,GAAGb,QAAQ,CAACO,IAAT,CAAcO,GAA/B;AAEA,UAAMC,MAAM,GAAG;AACbC,MAAAA,MAAM,EAAE,cADK;AAEbF,MAAAA,GAAG,EAAED,QAFQ;AAGbI,MAAAA,OAAO,EAAE;AAHI,KAAf;AAMA,UAAMC,SAAS,GAAG9B,EAAE,CAAC+B,YAAH,CAAgB,WAAhB,EAA6BJ,MAA7B,CAAlB;AAEApB,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBsB,SAAnB,EA5BoC,CA8BpC;AACA;AACD,GAhCD;;AAkCA,sBACE,QAAC,QAAD;AACE,IAAA,cAAc,EAAE3B,kBADlB;AAEE,IAAA,QAAQ,EAAEM,YAFZ;AAGE,IAAA,KAAK,MAHP;AAIE,IAAA,QAAQ,EAAE,CAJZ;AAKE,IAAA,QAAQ,EAAE,KALZ;AAME,IAAA,SAAS,EAAE,KANb;AAOE,IAAA,YAAY,EAAC,aAPf;AAQE,IAAA,MAAM,EAAE;AACNuB,MAAAA,QAAQ,EAAE;AAAEC,QAAAA,KAAK,EAAE,GAAT;AAAcC,QAAAA,MAAM,EAAE;AAAtB,OADJ;AAENC,MAAAA,cAAc,EAAE;AAAEC,QAAAA,WAAW,EAAE;AAAf;AAFV;AARV;AAAA;AAAA;AAAA;AAAA,UADF;AAeD;;AAED,eAAelC,aAAf","sourcesContent":["import \"react-dropzone-uploader/dist/styles.css\";\nimport Dropzone from \"react-dropzone-uploader\";\nimport S3 from \"../lib/AWS\";\nimport axios from \"axios\";\n// import server from \"../config\";\n\n// get image from uploader\nfunction ImageUploader() {\n  const handleChangeStatus = ({ meta, remove }, status) => {\n    console.log(status, meta);\n  };\n  const handleSubmit = async (files) => {\n    const f = files[0];\n    console.log(f[\"file\"]);\n\n    // * GET request: presigned URL\n    const response = await axios.get(process.env.NEXT_PUBLIC_API_ENDPOINT);\n\n    console.log(\"Response: \", response);\n    // store\n    const result = await fetch(response.data.uploadURL, {\n      method: \"PUT\",\n      headers: {\n        ContentType: \"image/jpeg, image/png, image/heic, mov/mp4\",\n      },\n      body: f[\"file\"],\n    });\n    console.log(\"Result: \", result);\n\n    const fileName = response.data.Key;\n\n    const params = {\n      Bucket: \"swell-clutch\",\n      Key: fileName,\n      Expires: 604800,\n    };\n\n    const signedURL = S3.getSignedUrl(\"getObject\", params);\n\n    console.log(\"url\", signedURL);\n\n    // next steps are to store key or file path in back end.\n    // retrieve key, get signed URL\n  };\n\n  return (\n    <Dropzone\n      onChangeStatus={handleChangeStatus}\n      onSubmit={handleSubmit}\n      hello\n      maxFiles={1}\n      multiple={false}\n      canCancel={false}\n      inputContent=\"Add A Photo\"\n      styles={{\n        dropzone: { width: 200, height: 10 },\n        dropzoneActive: { borderColor: \"green\" },\n      }}\n    />\n  );\n}\n\nexport default ImageUploader;\n"]},"metadata":{},"sourceType":"module"}