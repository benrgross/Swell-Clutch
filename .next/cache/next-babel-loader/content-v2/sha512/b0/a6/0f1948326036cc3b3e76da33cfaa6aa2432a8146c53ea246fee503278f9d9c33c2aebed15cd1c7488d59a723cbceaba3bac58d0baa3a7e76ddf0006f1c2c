{"ast":null,"code":"import axios from \"axios\";\n\nconst cheerio = require(\"cheerio\");\n\nexport default async function handler(req, res) {\n  console.log(\"req.body\", req.body);\n\n  if (req.method === \"POST\") {\n    try {\n      const results = [];\n      const {\n        data\n      } = await axios.get(`https://www.surfline.com/search/${req.body.spot}`);\n      const $ = cheerio.load(data);\n      $(\"#surf-spots > div > div\").each((i, element) => {\n        let href = $(element).children(\"a\").attr(\"href\");\n        let spotId = href.split(\"/\")[5];\n        let name = $(element).find(\".result__name\").text();\n        const spot = {\n          name: name,\n          spotId: spotId,\n          href: href\n        };\n        results.push(spot);\n      });\n      res.json(results);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}","map":{"version":3,"sources":["/Users/bengross/Desktop/Swell Clutch/Swell-Clutch/pages/api/searchSpot.js"],"names":["axios","cheerio","require","handler","req","res","console","log","body","method","results","data","get","spot","$","load","each","i","element","href","children","attr","spotId","split","name","find","text","push","json","error"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AACA,MAAMC,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AAEA,eAAe,eAAeC,OAAf,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;AAC9CC,EAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBH,GAAG,CAACI,IAA5B;;AACA,MAAIJ,GAAG,CAACK,MAAJ,KAAe,MAAnB,EAA2B;AACzB,QAAI;AACF,YAAMC,OAAO,GAAG,EAAhB;AACA,YAAM;AAAEC,QAAAA;AAAF,UAAW,MAAMX,KAAK,CAACY,GAAN,CACpB,mCAAkCR,GAAG,CAACI,IAAJ,CAASK,IAAK,EAD5B,CAAvB;AAIA,YAAMC,CAAC,GAAGb,OAAO,CAACc,IAAR,CAAaJ,IAAb,CAAV;AAEAG,MAAAA,CAAC,CAAC,yBAAD,CAAD,CAA6BE,IAA7B,CAAkC,CAACC,CAAD,EAAIC,OAAJ,KAAgB;AAChD,YAAIC,IAAI,GAAGL,CAAC,CAACI,OAAD,CAAD,CAAWE,QAAX,CAAoB,GAApB,EAAyBC,IAAzB,CAA8B,MAA9B,CAAX;AACA,YAAIC,MAAM,GAAGH,IAAI,CAACI,KAAL,CAAW,GAAX,EAAgB,CAAhB,CAAb;AACA,YAAIC,IAAI,GAAGV,CAAC,CAACI,OAAD,CAAD,CAAWO,IAAX,CAAgB,eAAhB,EAAiCC,IAAjC,EAAX;AAEA,cAAMb,IAAI,GAAG;AACXW,UAAAA,IAAI,EAAEA,IADK;AAEXF,UAAAA,MAAM,EAAEA,MAFG;AAGXH,UAAAA,IAAI,EAAEA;AAHK,SAAb;AAKAT,QAAAA,OAAO,CAACiB,IAAR,CAAad,IAAb;AACD,OAXD;AAYAR,MAAAA,GAAG,CAACuB,IAAJ,CAASlB,OAAT;AACD,KArBD,CAqBE,OAAOmB,KAAP,EAAc;AACdvB,MAAAA,OAAO,CAACC,GAAR,CAAYsB,KAAZ;AACD;AACF;AACF","sourcesContent":["import axios from \"axios\";\nconst cheerio = require(\"cheerio\");\n\nexport default async function handler(req, res) {\n  console.log(\"req.body\", req.body);\n  if (req.method === \"POST\") {\n    try {\n      const results = [];\n      const { data } = await axios.get(\n        `https://www.surfline.com/search/${req.body.spot}`\n      );\n\n      const $ = cheerio.load(data);\n\n      $(\"#surf-spots > div > div\").each((i, element) => {\n        let href = $(element).children(\"a\").attr(\"href\");\n        let spotId = href.split(\"/\")[5];\n        let name = $(element).find(\".result__name\").text();\n\n        const spot = {\n          name: name,\n          spotId: spotId,\n          href: href,\n        };\n        results.push(spot);\n      });\n      res.json(results);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}